<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MiniNero Web">

    <link rel="icon" href="images/mininero.ico" />

    <title>MiniNero Web</title>

    <!--<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/base-min.css">-->
    <link rel="stylesheet" href="css/email.css" />
    <link rel="stylesheet" href="css/marketing.css" />
    <link rel="stylesheet" href="css/side-menu.css" />
    <link rel="stylesheet" href="css/base-min.css" />
    <!--<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">-->
    <link rel="stylesheet" href="css/pure-min.css" />
    <link rel="stylesheet" href="css/baby-blue.css" />

    <link rel="stylesheet" href="css/qrcode.css" />


    <!-- basic react stuff I guess -->
    <script src="https://fb.me/react-15.0.2.min.js"></script>
    <script src="https://fb.me/react-dom-15.0.2.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.16/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.5/marked.min.js"></script>

    <!--NACL library -->
    <script type="text/javascript" src="scripts/nacl-fast.js"></script>
    <script type="text/javascript" src="scripts/naclutil.js"></script>
    <!-- NACL helpers for MiniNero Web -->
    <script type="text/javascript" src="scripts/MNW.js"></script>
    <!--Spinner library -->
    <script type="text/javascript" src="scripts/spin.min.js"></script>
    


    <!--qr code alternate source -->
    <script type="text/javascript" src="scripts/qrcode.js"></script>
    <script type="text/javascript">
        var sk = '';
        var pass = '';
        var ip = 'https://' + window.location.host;
        sessionStorage.setItem('_ip', ip);
    </script>
    
   

    <!--login style -->
    <style>
        body {
            margin: 0;
            background: white;
            font: black;
        }
        
        #wrapper,
        #wrapper2 {
            width: 100%;
            margin: 0 auto;
        }
        
        #qrcode {
            position: absolute;
            left: 50%;
           top: 250px;
            -webkit-transform: translate(50%, 50%);
            transform: translate(-50%, -50%);
        }
    </style>


</head>

<body>
    <div id="layout" height="100%">
        <!-- Menu toggle -->
        <a href="#menu" id="menuLink" class="menu-link">
            <!-- Hamburger icon -->
            <span></span>
        </a>

        <!-- purecss menu, doesn't play well with react.. -->
        <div id="menu">
            <div class="pure-menu">
                <a id="balancelink" class="pure-menu-heading" href="#">MiniNero <br></br> <div id="balance">0 XMR</div></a>

                <ul class="pure-menu-list">
                    <li class="pure-menu-item"><a href="#menu" id="homelink" class="pure-menu-link">Home</a></li>
                    <li class="pure-menu-item"><a href="#menu" id="apilink" class="pure-menu-link">Api Key</a></li>
                    <li class="pure-menu-item"><a href="#menu" id="txnlink" class="pure-menu-link">Transactions</a></li>
                    <li class="pure-menu-item"><a href="#menu" id="sendlink" class="pure-menu-link">Send</a></li>
                    <li class="pure-menu-item"><a href="#menu" id="addresslink" class="pure-menu-link">Receive</a></li>
                    <li class="pure-menu-item"><a href="https://www.reddit.com/r/monero" id="redditlink" class="pure-menu-link">Reddit</a></li>
                    <li class="pure-menu-item"><a href="https://forum.getmonero.org/" id="forumlink" class="pure-menu-link">Forum</a></li>
                    <li class="pure-menu-item"><a href="#menu" id="logoutlink" class="pure-menu-link">Log out</a></li>

                </ul>
            </div>
        </div>
        <!--script to change color of menu based on chosen theme -->
    <script type="text/javascript">
    var theme =    window.localStorage.getItem('theme');
    var menuHeader = document.getElementById("balancelink");
    
    if (theme == 0) {
        console.log('menu theme 0');
        menuHeader.style.background = "#1f8dd6";
    } else if (theme == 1) {
        console.log('menu theme 1');
        menuHeader.style.background = "#5b9a6f"
    }
    </script> 
        
        
        
        <!--end purecss menu -->
        <!-- helper for the purecss sidebar -->
        <script src="scripts/ui.js"></script>

        <!-- entry for reactive thing here -->
        <div id="innercontent">
            <div id="pagecontent"></div>
        </div>

        <!-- qr code appear here -->
        <div class="pure-g">
            <div id="wrapper2">
                <div id="qrcode"></div>
            </div>
        </div>

        <!--Receive Page-->
        <script type="text/javascript" src="scripts/GetAddress.js"></script>
        <!--Get Balance-->
        <script type="text/javascript" src="scripts/GetBalance.js"></script>
        <!--ApiKey page-->
        <script type="text/javascript" src="scripts/ApiKey.js"></script>
        <!--this script loads the reactive "homepage" if you click home -->
        <script type="text/babel" src="scripts/PageContent.js"></script>
        <!--this script loads the reactive "Transactions page" if you click home -->
        <script type="text/babel" src="scripts/Transactions.js"></script>

        <!--this script loads the reactive "Sender Page" if you click home -->
        <script type="text/babel" src="scripts/Sender.js"></script>


    </div>

    <script type="text/javascript">
        var opts = {
            lines: 20 // The number of lines to draw
                ,
            length: 5 // The length of each line
                ,
            width: 14 // The line thickness
                ,
            radius: 42 // The radius of the inner circle
                ,
            scale: 2 // Scales overall size of the spinner
                ,
            corners: 1 // Corner roundness (0..1)
                ,
            color: '#000' // #rgb or #rrggbb or array of colors
                ,
            opacity: 0.25 // Opacity of the lines
                ,
            rotate: 0 // The rotation offset
                ,
            direction: 1 // 1: clockwise, -1: counterclockwise
                ,
            speed: 1 // Rounds per second
                ,
            trail: 60 // Afterglow percentage
                ,
            fps: 20 // Frames per second when using setTimeout() as a fallback for CSS
                ,
            zIndex: 2e9 // The z-index (defaults to 2000000000)
                ,
            className: 'spinner' // The CSS class to assign to the spinner
                ,
            top: '150px' // Top position relative to parent
                ,
            left: '50%' // Left position relative to parent
                ,
            shadow: false // Whether to render a shadow
                ,
            hwaccel: false // Whether to use hardware acceleration
                ,
            position: 'relative' // Element positioning
        }
        var spint = document.getElementById('layout');
        var spinner = new Spinner(opts);


        var now = function() {
            return String(Math.floor((new Date).getTime() / 1000));
        }

        //check stored epoch, clear tokens if too old, 
        //return true if still logged in.. 
        var isLoggedIn = function() {
            var sk = sessionStorage.getItem('_sk');
            //check if anything is stored.
            if (sk == null) {
                console.log('d');
                return false;
            }
            var epoch = parseInt(sessionStorage.getItem('_epoch'));
            if (epoch == null) {
                console.log('e');
                return false;
            }
            var nowtime = now();
            //10 minute time out
            if (epoch - nowtime > (60 * 10)) {
                console.log('f');
                return false;
            }
            console.log('g');
            return true;
        }
    </script>
    



</body>

</html>